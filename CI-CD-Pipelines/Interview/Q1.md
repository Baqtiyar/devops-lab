CI/CD Pipeline Fails During `npm install`

### 📌 Question:
Your CI/CD pipeline fails during the `npm install` step while deploying a Node.js application. The error message says: “**ENOSPC: no space left on device**.” What steps would you take to resolve this issue and prevent it from happening again?

---

### 🧠 Answer:

This is a classic **disk space issue** in CI/CD environments, often seen in Docker agents or self-hosted runners. Here's how I would handle it:

1. **Confirm the root cause from pipeline logs:**
   - The error `ENOSPC` means the server running the job is **out of disk space**.
   - Logs might look like:
     ```
     npm ERR! ENOSPC: no space left on device
     ```

2. **SSH into the build agent (if self-hosted):**
   ```bash
   df -h
   ```
   This shows disk usage. Focus on `/` or `/var` partitions.

3. **Clean up unnecessary files:**
   ```bash
   docker system prune -af
   sudo apt-get clean
   rm -rf /tmp/*
   rm -rf ~/.npm/_cacache
   ```

4. **Check large directories:**
   ```bash
   du -sh /* 2>/dev/null | sort -h
   ```
   Find what's taking up space — e.g., logs, Docker images, cache folders.

5. **Clear old workspace or pipeline artifacts (if applicable):**
   - Jenkins:
     ```bash
     rm -rf /var/lib/jenkins/workspace/*
     ```
   - GitHub Actions:
     Use `actions/cache@v3` wisely and set limits.

6. **Retry the pipeline after cleanup**

---

### 🔁 Prevention Tips:
- Use cleanup steps at the end of every pipeline (`post` or `finally` blocks).
- Limit Docker image layers or use `--no-cache` where needed.
- Rotate logs with tools like `logrotate`.
- Store pipeline artifacts externally (e.g., S3, Nexus).




